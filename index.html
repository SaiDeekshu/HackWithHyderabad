<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFO Helper Agent</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ï¿½ CFO Helper Agent ğŸ‘‘</h1>
            <p>Royal Financial Simulation & Strategic Forecasting</p>
            <div class="usage-counter">
                <span>Scenarios Tested: <strong id="scenarioCount">0</strong></span>
                <span>Reports Exported: <strong id="reportCount">0</strong></span>
            </div>
        </header>

        <div class="main-content">
            <!-- Control Panel -->
            <div class="control-panel">
                <h2>ğŸ›ï¸ Scenario Controls</h2>
                
                <div class="control-group">
                    <label for="monthlySpending">ğŸ’° Monthly Spending (â‚¹)</label>
                    <input type="range" id="monthlySpending" min="10000" max="100000" value="30000" step="1000">
                    <span class="value" id="spendingValue">â‚¹30,000</span>
                </div>

                <div class="control-group">
                    <label for="engineers">ğŸ‘¥ Number of Engineers</label>
                    <input type="range" id="engineers" min="1" max="10" value="3" step="1">
                    <span class="value" id="engineersValue">3</span>
                </div>

                <div class="control-group">
                    <label for="productPrice">ğŸ’µ Product Price (â‚¹)</label>
                    <input type="range" id="productPrice" min="100" max="1000" value="500" step="10">
                    <span class="value" id="priceValue">â‚¹500</span>
                </div>

                <div class="control-group">
                    <label for="marketingSpend">ğŸ¯ Marketing Spend (â‚¹)</label>
                    <input type="range" id="marketingSpend" min="5000" max="50000" value="15000" step="1000">
                    <span class="value" id="marketingValue">â‚¹15,000</span>
                </div>

                <div class="control-group">
                    <label for="currentCash">ğŸ¦ Current Cash (â‚¹)</label>
                    <input type="range" id="currentCash" min="100000" max="1000000" value="500000" step="10000">
                    <span class="value" id="cashValue">â‚¹5,00,000</span>
                </div>

                <button id="simulateBtn" class="simulate-btn">ğŸ”® Run Simulation</button>
                <button id="refreshDataBtn" class="refresh-btn">ğŸ”„ Refresh Live Data</button>
            </div>

            <!-- Results Panel -->
            <div class="results-panel">
                <h2>ğŸ“Š Forecast Results</h2>
                
                <div class="metrics">
                    <div class="metric-card">
                        <h3>â±ï¸ Runway</h3>
                        <p id="runway" class="metric-value">-</p>
                    </div>
                    <div class="metric-card">
                        <h3>ğŸ’¸ Monthly Burn Rate</h3>
                        <p id="burnRate" class="metric-value">-</p>
                    </div>
                    <div class="metric-card">
                        <h3>âš–ï¸ Break-even Point</h3>
                        <p id="breakEven" class="metric-value">-</p>
                    </div>
                    <div class="metric-card">
                        <h3>ğŸ“ˆ Profit Margin</h3>
                        <p id="profitMargin" class="metric-value">-</p>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="forecastChart"></canvas>
                </div>

                <div class="action-buttons">
                    <button id="exportBtn" class="export-btn">ğŸ“„ Export Report</button>
                    <button id="shareBtn" class="share-btn">ğŸ”— Share Scenario</button>
                    <button id="chatbotBtn" class="chatbot-btn">ğŸ¤– Ask AI Assistant</button>
                </div>
            </div>
        </div>

        <!-- AI Chatbot Panel -->
        <div class="chatbot-panel" id="chatbotPanel">
            <div class="chatbot-header">
                <h3>ğŸ¤– CFO AI Assistant</h3>
                <button id="closeChatbot" class="close-chatbot">âœ–</button>
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="ai-message">
                    <div class="message-avatar">ğŸ¤–</div>
                    <div class="message-content">
                        <p>Hello! I'm your CFO AI Assistant. I can help you with:</p>
                        <ul>
                            <li>ğŸ’° Financial analysis and insights</li>
                            <li>ğŸ“Š Scenario interpretations</li>
                            <li>ğŸ¯ Strategic recommendations</li>
                            <li>â“ Business finance questions</li>
                        </ul>
                        <p>Ask me anything about your financial projections!</p>
                    </div>
                </div>
            </div>
            <div class="chatbot-input-area">
                <div class="quick-questions">
                    <button class="quick-btn" data-question="What does my current runway mean?">ğŸ“Š Runway Analysis</button>
                    <button class="quick-btn" data-question="Should I hire more engineers right now?">ğŸ‘¥ Hiring Advice</button>
                    <button class="quick-btn" data-question="How can I improve my cash flow?">ğŸ’¡ Cash Flow Tips</button>
                    <button class="quick-btn" data-question="Is my current pricing strategy optimal?">ï¿½ Pricing Review</button>
                </div>
                <div class="chatbot-input">
                    <input type="text" id="chatInput" placeholder="Ask your CFO AI anything..." maxlength="200">
                    <button id="sendMessage">Send</button>
                </div>
            </div>
        </div>

        <!-- Live Data Panel -->
        <div class="live-data-panel">
            <h3>ğŸ“¡ Live Data Updates (via Pathway API)</h3>
            <div class="api-status">
                <span class="status-indicator" id="apiStatus">ğŸŸ¢ Connected to Pathway API</span>
                <span class="flexprice-status" id="flexpriceStatus">ğŸ’³ Flexprice Billing Active</span>
            </div>
            <div class="data-updates" id="dataUpdates">
                <p>Connecting to live data stream...</p>
            </div>
            <div class="billing-info">
                <h4>ğŸ’³ Real-time Billing (Flexprice API)</h4>
                <p>Scenario simulations: â‚¹<span id="scenarioCost">0</span></p>
                <p>Report exports: â‚¹<span id="exportCost">0</span></p>
                <p><strong>Total: â‚¹<span id="totalCost">0</span></strong></p>
                <small class="api-info">Billed in real-time via Flexprice API</small>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>